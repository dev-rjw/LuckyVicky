<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="content-language" content="ko" />
        <meta name="viewport" content="initial-scale=1.0,user-scalable=yes,maximum-scale=3,width=device-width" />

        <title>Îü≠7„Ö£ÎπÑ7„Ö£</title>
        <meta name="title" content="Îü≠7„Ö£ÎπÑ7„Ö£" />
        <meta name="subject" content="Îü≠7„Ö£ÎπÑ7„Ö£" />
        <meta name="author" content="Îü≠7„Ö£ÎπÑ7„Ö£" />
        <meta name="copyright" content="Îü≠7„Ö£ÎπÑ7„Ö£" />
        <meta name="description" content="Îü≠7„Ö£ÎπÑ7„Ö£" />
        <meta name="keywords" content="Îü≠7„Ö£ÎπÑ7„Ö£" />
        <meta property="og:type" content="website" />
        <meta property="og:title" content="Îü≠7„Ö£ÎπÑ7„Ö£" />
        <meta property="og:description" content="Îü≠7„Ö£ÎπÑ7„Ö£" />
        <meta property="og:image" content="./resources/images/og.jpg" />

        <!-- favicon -->
        <link rel="shortcut icon" href="./resources/images/favicon/favicon.ico" />
        <link rel="apple-touch-icon" sizes="180x180" href="./resources/images/favicon/apple-icon-180x180.png" />
        <link rel="icon" type="image/png" sizes="192x192" href="./resources/images/favicon/android-icon-192x192.png" />
        <link rel="icon" type="image/png" sizes="32x32" href="./resources/images/favicon/favicon-32x32.png" />
        <link rel="icon" type="image/png" sizes="96x96" href="./resources/images/favicon/favicon-96x96.png" />
        <link rel="icon" type="image/png" sizes="16x16" href="./resources/images/favicon/favicon-16x16.png" />
        <link rel="manifest" href="./resources/images/favicon/manifest.json" />
        <meta name="msapplication-TileImage" content="./resources/images/favicon/ms-icon-144x144.png" />
        <meta name="msapplication-TileColor" content="#59C095" />
        <meta name="theme-color" content="#59C095" />

        <!-- Ïä§ÌÉÄÏùº -->
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700;900&display=swap" />
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
        <link href="./resources/css/reset-fonts.css" rel="stylesheet" />
        <link href="./resources/css/common.css" rel="stylesheet" />
        <link href="./resources/css/sub.css" rel="stylesheet" />
    </head>
    <body>
        <script src="./resources/js/script.js"></script>
        <!-- ÎßàÏö∞Ïä§ Ìè¨Ïù∏ÌÑ∞ -->
        <div class="mouse-cursor"><img src="./resources/images/icon/clover.png" alt="ÎßàÏö∞Ïä§Ïª§ÏÑú" /></div>

        <div id="wrap">
            <!-- Î∞∞Í≤Ω -->
            <div id="clover"></div>

            <div class="container" style="position: relative; z-index: 1" ;>
                <div class="contents">
                    <div class="header">
                        <h1 class="logo"><a href="./index.html" title="ÌôàÏúºÎ°ú Ïù¥Îèô"></a></h1>
                    </div>
                    <!-- ub-section -->
                    <section id="sub-section">
                        <!-- tabRow -->
                        <div class="tab-row">
                            <div class="tab-column">
                                <img src="./resources/images/jh/0.jpg" alt="Î∞ïÏ§ÄÌò∏" id="0" />
                                <span class="tab-hover-txt" id="0">Î∞ïÏ§ÄÌò∏üçÄ</span>
                            </div>
                            <div class="tab-column">
                                <img src="./resources/images/joayoung/joayoung-img.jpg" alt="Ï°∞ÏïÑÏòÅ" id="1" />
                                <span class="tab-hover-txt" id="1">Ï°∞ÏïÑÏòÅüçÄ</span>
                            </div>
                            <div class="tab-column">
                                <img src="./resources/images/kimminkyu/kimminkyu-img01.jpg" alt="ÍπÄÎØºÍ∑ú" id="2" />
                                <span class="tab-hover-txt" id="2">ÍπÄÎØºÍ∑úüçÄ</span>
                            </div>
                            <div class="tab-column">
                                <img src="./resources/images/jiwon/1.jpg" alt="Î•òÏßÄÏõê" id="3" />
                                <span class="tab-hover-txt" id="3">Î•òÏßÄÏõêüçÄ</span>
                            </div>
                            <div class="tab-column">
                                <img src="./resources/images/hyun/profile1.jpg" alt="Ïù¥Ï∞ΩÌòÑ" id="4" />
                                <span class="tab-hover-txt" id="4">Ïù¥Ï∞ΩÌòÑüçÄ</span>
                            </div>
                        </div>
                        <!--// tabRow -->
                        <div class="view">
                            <div class="left-area">
                                <!-- carousel-wrap -->
                                <div id="carousel-wrap">
                                    <div class="inner">
                                        <!-- carousel-slide -->
                                        <div id="carousel-slide"></div>
                                        <!--// carousel-slide -->

                                        <!-- carousel-thumb -->
                                        <div id="carousel-thumb"></div>
                                        <!-- carousel-thumb -->

                                        <!-- btn-area -->
                                        <div id="carousel-btn-area">
                                            <button type="button" id="btn-prev"><span class="material-symbols-rounded"> chevron_left </span></button>
                                            <button type="button" id="btn-next"><span class="material-symbols-rounded"> chevron_right </span></button>
                                        </div>
                                        <!--// btn-area -->
                                    </div>
                                </div>
                                <!--// carousel-wrap -->
                            </div>
                            <div class="right-area">
                                <div class="weather-card-wrap">
                                    <div class="weather-card">
                                        <div class="weather-card-tit"><span class="weather-card-city-name">Ïò§Îäò</span>Ïùò ÎÇ†Ïî®</div>
                                        <div class="weather-card-text">‚õÖ‚òÅÔ∏è‚ùÑÔ∏è‚òî</div>
                                        <img class="weather-card-icon" />
                                    </div>
                                </div>

                                <div class="list">
                                    <div class="temp" style="display: none"></div>
                                </div>
                            </div>
                        </div>
                    </section>
                    <!--// ub-section -->

                    <!-- <img id="expandedImg" style="z-index: -9999; width: 0; height: 0; opacity: 0" width="100%" /> -->
                    <div class="footer">
                        <div class="copyright">‚ìí LuckyVicky</div>
                    </div>
                </div>
            </div>
        </div>

        <script type="module">
            // Import the functions you need from the SDKs you need
            import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
            import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
            import { collection, addDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
            import { getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
            import { doc, updateDoc, increment, onSnapshot, arrayUnion, arrayRemove } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

            const firebaseConfig = {
                apiKey: "AIzaSyCmKJSlgO0ueisoj66FA_rOUTzNv8YzJ3o",
                authDomain: "luckyvicky-a9ab7.firebaseapp.com",
                projectId: "luckyvicky-a9ab7",
                storageBucket: "luckyvicky-a9ab7.appspot.com",
                messagingSenderId: "383119247900",
                appId: "1:383119247900:web:27203ea025a377e295edd9",
                measurementId: "G-CCN3JQ0KH2",
            };

            // Initialize Firebase
            const app = initializeApp(firebaseConfig);
            const db = getFirestore(app);

            window.onload = async function () {
                const carouselWrap = document.getElementById("carousel-wrap"); // Ï†ÑÏ≤¥ Í∞êÏã∏Í≥†ÏûàÎäî Ïä¨ÎùºÏù¥Îìú ÏòÅÏó≠
                const carouselSlide = document.getElementById("carousel-slide"); // ÌÅ∞ Ïù¥ÎØ∏ÏßÄ Ïä¨ÎùºÏù¥Îìú (ÏûêÎèô)
                const carouselSlideItems = document.querySelectorAll(".carousel-slide-item"); // ÌÅ∞ Ïù¥ÎØ∏ÏßÄ Ïä¨ÎùºÏù¥Îìú ÏïÑÏù¥ÌÖú
                const carouselThumb = document.getElementById("carousel-thumb");
                const carouselBtnArea = document.getElementById("carousel-btn-area");
                const carouselBtnPrev = document.getElementById("btn-prev");
                const carouselBtnNext = document.getElementById("btn-next");

                let slideWid; // Ïä¨ÎùºÏù¥Îìú ÎÑìÏù¥ Í∞í
                let slideCurrentIdx = 0; // Ïä¨ÎùºÏù¥Îìú ÌòÑÏû¨ Ïù∏Îç±Ïä§ Í∞í
                let slideMoveDelay = 3000; // Ïä¨ÎùºÏù¥Îìú ÎèåÏïÑÍ∞ÄÎäî ÏÜçÎèÑ
                let slideMoveTimer; // interval Ï¥àÍ∏∞Ìôî
                let isSlide = false;

                // Ïä¨ÎùºÏù¥Îìú ÏûêÎèô Î°§ÎßÅ
                const carouselSlideMove = () => {
                    slideMoveTimer = setInterval(() => {
                        const carouselSlideLength = document.querySelectorAll(".carousel-slide-item").length;
                        slideCurrentIdx = (slideCurrentIdx + 1) % carouselSlideLength; // ÌòÑÏû¨ Ïù∏Îç±Ïä§Í∞í Íµ¨ÌïòÍ∏∞

                        carouselSlide.style.transform = `translate3d(-${slideCurrentIdx * slideWid}px, 0px, 0px)`;

                        carouselThumbSet();

                        // document.querySelectorAll(".carousel-thumb-item").forEach((thumb, idx) => {
                        //     thumb.classList.toggle("curr", idx === slideCurrentIdx);
                        // });
                    }, slideMoveDelay);
                };

                // ÌòÑÏû¨ Ïù∏Îç±Ïä§ Í∞íÏóê ÎßûÏ∂∞ Ïç∏ÎÑ§Ïùº ÏóëÌã∞Î∏å
                const carouselThumbSet = () => {
                    const carouselThumbItems = document.querySelectorAll(".carousel-thumb-item");
                    carouselThumbItems.forEach((thumb) => thumb.classList.remove("curr"));
                    carouselThumbItems[slideCurrentIdx].classList.add("curr");
                };

                // Ïä¨ÎùºÏù¥Îìú Îí§Î°úÍ∞ÄÍ∏∞
                const carouselPrevMove = () => {
                    clearInterval(slideMoveTimer); // Î°§ÎßÅ Ï¥àÍ∏∞Ìôî
                    slideCurrentIdx == 0 ? (slideCurrentIdx = 4) : slideCurrentIdx--; // Ïä¨ÎùºÏù¥Îìú Îß® ÏïûÏù¥Î©¥ ÎßàÏßÄÎßâÏúºÎ°ú Ïù¥Îèô
                    carouselSlide.style.transform = `translate3d(-${slideCurrentIdx * slideWid}px, 0px, 0px)`;

                    carouselThumbSet(); // ÌòÑÏû¨ Ïù∏Îç±Ïä§ Í∞íÏóê ÎßûÏ∂∞ Ïç∏ÎÑ§Ïùº ÏóëÌã∞Î∏å
                    carouselSlideMove(); // Îã§Ïãú Î°§ÎßÅ ÏãúÏûë
                };

                // Ïä¨ÎùºÏù¥Îìú ÏïûÏúºÎ°úÍ∞ÄÍ∏∞
                const carouselNextMove = () => {
                    clearInterval(slideMoveTimer); // Î°§ÎßÅ Ï¥àÍ∏∞Ìôî
                    slideCurrentIdx == 4 ? (slideCurrentIdx = 0) : slideCurrentIdx++; // Ïä¨ÎùºÏù¥Îìú ÎßàÏßÄÎßâÏù¥Î©¥ Îß® ÏïûÏúºÎ°ú Ïù¥Îèô
                    carouselSlide.style.transform = `translate3d(-${slideCurrentIdx * slideWid}px, 0px, 0px)`;

                    carouselThumbSet(); // ÌòÑÏû¨ Ïù∏Îç±Ïä§ Í∞íÏóê ÎßûÏ∂∞ Ïç∏ÎÑ§Ïùº ÏóëÌã∞Î∏å
                    carouselSlideMove(); // Îã§Ïãú Î°§ÎßÅ ÏãúÏûë
                };

                // Ïä¨ÎùºÏù¥Îìú ÏãúÏûë
                const handleSlideStart = () => {
                    // Ïä¨ÎùºÏù¥Îìú Î¶¨Ïä§Ìä∏ Ï¥àÍ∏∞ ÎÑìÏù¥ ÏÑ∏ÌåÖ
                    slideWid = carouselSlide.offsetWidth;
                    carouselSlideItems.forEach((item, idx) => (item.style.width = slideWid + "px"));

                    carouselSlideMove();

                    // Ïä¨ÎùºÏù¥Îìú Ïç∏ÎÑ§Ïùº ÌÅ¥Î¶≠ Í∏∞Îä•
                    document.querySelectorAll(".carousel-thumb-item").forEach((item, idx) => {
                        // Ïç∏ÎÑ§Ïùº ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏
                        item.addEventListener("click", () => {
                            clearInterval(slideMoveTimer); // Î°§ÎßÅ Ï¥àÍ∏∞Ìôî
                            slideCurrentIdx = idx; // Ïù∏Îç±Ïä§Í∞íÏùÑ ÌÅ¥Î¶≠Ìïú Ïù∏Îç±Ïä§ Í∞íÍ≥º ÎèôÏùºÌïòÍ≤å Î≥ÄÍ≤ΩÌï¥Ï§å

                            //ÌÅ¥Î¶≠Ìïú ÏöîÏÜåÏóê ÎßûÏ∂∞ Ïä¨ÎùºÏù¥Îìú Ïù¥Îèô : carouselSlideÏùò transform3dÏùò Í∞íÏùÑ ÌÅ¥Î¶≠Ìïú ÏöîÏÜåÏùò -(Ïù∏Îç±Ïä§*Ïä¨ÎùºÏù¥Îìú) ÎÑìÏù¥Î°ú Ï†ÅÏö©
                            carouselSlide.style.transform = `translate3d(-${slideCurrentIdx * slideWid}px, 0px, 0px)`;

                            carouselThumbSet(); // ÌòÑÏû¨ Ïù∏Îç±Ïä§ Í∞íÏóê ÎßûÏ∂∞ Ïç∏ÎÑ§Ïùº ÏóëÌã∞Î∏å
                            carouselSlideMove(); // Îã§Ïãú Î°§ÎßÅ ÏãúÏûë
                        });
                    });

                    carouselBtnPrev.addEventListener("click", carouselPrevMove); // Ïù¥Ï†Ñ Î≤ÑÌäº ÌÅ¥Î¶≠
                    carouselBtnNext.addEventListener("click", carouselNextMove); // Îã§Ïùå Î≤ÑÌäº ÌÅ¥Î¶≠
                };

                let isDragChk = false; // [drag] Ï¥àÍ∏∞Ìôî
                let downClientX; // [drag] ÎßàÏö∞Ïä§ ÌÅ¥Î¶≠ÌñàÏùÑ Îïå Ìè¨Ïù∏ÌÑ∞ ÏúÑÏπò
                let upClientX; // [drag] ÎßàÏö∞Ïä§ ÎïüÏùÑ Îïå Ìè¨Ïù∏ÌÑ∞ ÏúÑÏπò

                // ÎßàÏö∞Ïä§ ÌÅ¥Î¶≠ÌñàÏùÑ Îïå Ïù¥Î≤§Ìä∏
                carouselSlide.addEventListener("mousedown", (e) => {
                    isDragChk = true;
                    downClientX = e.clientX; // Ï≤òÏùå ÌÅ¥Î¶≠Ìï† Îïå ÌÅ¥Î¶≠ ÏßÄÏ†ê Ï≤¥ÌÅ¨
                });

                // ÎßàÏö∞Ïä§ ÌÅ¥Î¶≠ÏóêÏÑú ÎïüÏùÑ Îïå Ïù¥Î≤§Ìä∏
                carouselSlide.addEventListener("mouseup", (e) => {
                    // Ïù¥ÎØ∏ÏßÄ Îì§Ïñ¥Í∞ÄÎ©¥ Ïã§ÌñâÏù¥ ÏïàÎêòÍ∞ÄÏßÄÍ≥† css ÏóêÏÑú imgÏóê user-drag: none; ÎÑ£Ïñ¥Ï§òÏïºÌï®
                    isDragChk = false;
                    upClientX = e.clientX; // ÌÅ¥Î¶≠ÌõÑ ÎïüÏùÑ Îïå ÌÅ¥Î¶≠ ÏßÄÏ†ê Ï≤¥ÌÅ¨

                    // Ï≤´ÌÅ¥Î¶≠ > ÌÅ¥Î¶≠ÎïüÏùÑÎïå ? Ïò§Î•∏Ï™Ω Ïù¥Îèô : ÏôºÏ™Ω Ïù¥Îèô;
                    downClientX > upClientX ? carouselNextMove() : carouselPrevMove();
                    carouselThumbSet(); // ÌòÑÏû¨ Ïù∏Îç±Ïä§ Í∞íÏóê ÎßûÏ∂∞ Ïç∏ÎÑ§Ïùº ÏóëÌã∞Î∏å
                });

                // Ïä¨ÎùºÏù¥Îìú Ï¥àÍ∏∞Ìôî
                const slideReset = () => {
                    slideCurrentIdx = 0;
                    clearInterval(slideMoveTimer);
                    carouselSlide.innerHTML = "";
                    carouselThumb.innerHTML = "";
                    carouselSlide.style.transform = `translate3d(0px, 0px, 0px)`;
                    isSlide = false;
                };

                // Ïä¨ÎùºÏù¥Îìú ÏÉùÏÑ±
                const createSlides = (imgs) => {
                    let slideBigItems = "";
                    let slideThumbItems = "";

                    for (let i = 0; i < imgs.length; i++) {
                        slideBigItems += `
                                <div class="carousel-slide-item">
                                    <img src="${imgs[i]}" />
                                </div>
                            `;
                        slideThumbItems += `
                                <div class="carousel-thumb-item ${i === 0 ? "curr" : ""}">
                                    <img src="${imgs[i]}" />
                                </div>
                            `;
                    }
                    carouselSlide.innerHTML = slideBigItems;
                    carouselThumb.innerHTML = slideThumbItems;
                };

                // ÏÇ¨ÏßÑ Î∞è ÏÑ§Î™Ö ÏÉùÏÑ±
                const createDescrption = (row) => {
                    let name = row["name"];
                    let description = row["description"];
                    let mbti = row["mbti"];
                    let advantages = row["advantages"];
                    let style = row["style"];
                    let tmi = row["tmi"];
                    let blog = row["blog"];
                    let blogIcon;
                    if (blog.indexOf("github") != -1) {
                        blogIcon = "github-io";
                    } else if (blog.indexOf("velog") != -1) {
                        blogIcon = "velog";
                    } else {
                        blogIcon = "tstory";
                    }
                    let github = row["github"];
                    let imgs = row["image"];
                    let index = row["index"];
                    let likes = row["likes"];
                    let city = row["city"];

                    const temp = document.createElement("div");
                    temp.className = "temp";
                    temp.innerHTML = `
                        <div class="name-description-wrap">
                            <h1 id="name">${name}<p id="mbti">${mbti}</p></h1>
                            <h3 id="description">${description}</h3>
                        </div>
                        <div class="info-list-wrap">
                            <ul class="info-list">
                                <li>
                                    <span class="info-list-tit">Ïû•Ï†ê</span>
                                    <span id="advantages" class="info-list-txt">${advantages}</span>
                                </li>
                                <li>
                                    <span class="info-list-tit">ÌòëÏóÖÏä§ÌÉÄÏùº</span>
                                    <span id="advantages" class="info-list-txt">${style}</span>
                                </li>
                                <li>
                                    <span class="info-list-tit">TMI</span>
                                    <span id="advantages" class="info-list-txt">${tmi}</span>
                                </li>
                            </ul>
                        </div>

                        <div class="info-btn-wrap">
                            <div class="info-btn-left">
                                 <a href="${blog}" class="info-btn" target="_blank"><img src="./resources/images/icon/${blogIcon}.svg" alt="Î∏îÎ°úÍ∑∏ Î°úÍ≥†"></a>
                                <a href="${github}" class="info-btn" target="_blank"><img src="./resources/images/icon/github.svg" alt="ÍπÉÌóàÎ∏å Î°úÍ≥†"></a>
                            </div>

                            <div class="info-btn-right">
                                <div id="like-btn-area"></div>
                            </div>
                        </div>

                        <aside class="comments-aside">
                            <div class="comments-group">
                                <div class="comments-contents">
                                    <ul class="comments-list"></ul>
                                </div>
                            </div>
                            <div class="form-group">
                                <form class="comments-form">
                                    <input id="comment-input" type="text" placeholder="Comment..." />
                                    <button id="send-btn">Send</button>
                                </form>
                            </div>
                        </aside>
                    `;
                    document.querySelector(".list").append(temp);
                    createSlides(imgs);

                    return index, likes, city;
                };

                const createComment = (imgId) => {
                    var onTab = imgId; // Ï§ÄÌò∏ ÏàòÏ†ï

                    // comment start -----------------------------------------
                    const form = document.querySelector("form");
                    const input = document.querySelector("input");
                    const ul = document.querySelector("ul.comments-list");

                    // ÎåìÍ∏Ä ÏÇ≠Ï†ú
                    const delItem = (event) => {
                        const target = event.target.parentElement;
                        console.log(target);

                        // Ï§ÄÌò∏ ÏàòÏ†ï
                        var now;
                        docs.forEach((doc) => {
                            let row = doc.data();
                            if (row["index"] == onTab) {
                                now = doc.id;
                            }
                        });

                        console.log("now = " + now); // Î¨∏ÏÑú id

                        let commedDoc = doc(db, "description", now);

                        updateDoc(commedDoc, {
                            commend: arrayRemove(target.querySelector("span").innerText),
                        });
                        // Ï§ÄÌò∏ ÏàòÏ†ï ÎÅù

                        target.remove();
                    };

                    // ÎåìÍ∏Ä ÏàòÏ†ï
                    const modifyItem = (event) => {
                        // const target = event.target.parentElement;
                        const message = this.prompt("ÏàòÏ†ïÌï† Î©îÏÑ∏ÏßÄÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî.", event.target.parentElement.firstElementChild.innerText);
                        event.target.parentElement.firstElementChild.innerText = message;
                        // --------
                    };

                    // ÎåìÍ∏Ä Ï∂îÍ∞Ä
                    const addItem = (text) => {
                        if (text !== "") {
                            const li = document.createElement("li");
                            const removeBtn = document.createElement("button");
                            const modifyBtn = document.createElement("button");
                            const span = document.createElement("span");
                            span.innerText = text;
                            modifyBtn.innerText = "Edit";
                            removeBtn.innerText = "Del";
                            modifyBtn.addEventListener("click", modifyItem);
                            removeBtn.addEventListener("click", delItem);
                            li.appendChild(span);
                            li.appendChild(modifyBtn);
                            li.appendChild(removeBtn);
                            ul.appendChild(li);
                        }
                    };

                    const handler = (event) => {
                        event.preventDefault();

                        // Ï§ÄÌò∏ ÏàòÏ†ï
                        var nowDoc;
                        console.log("docs =" + docs);
                        docs.forEach((doc) => {
                            let row = doc.data();
                            // console.log(doc.data());
                            if (row["index"] == onTab) {
                                console.log(row["index"]); // 4
                                // console.log(onTab);
                                nowDoc = doc.id;
                                // console.log(doc.id);
                            }
                        });

                        // console.log("nowDoc =" + nowDoc); // Î¨∏ÏÑú id

                        let commendDoc = doc(db, "description", nowDoc);

                        updateDoc(commendDoc, {
                            commend: arrayUnion(input.value),
                        });
                        // Ï§ÄÌò∏ ÏàòÏ†ï ÎÅù

                        input.value = "";
                    };

                    // Ï§ÄÌò∏ ÏàòÏ†ï
                    let nowDocId;
                    docs.forEach((doc) => {
                        let row = doc.data();
                        if (row["index"] == onTab) {
                            nowDocId = doc.id;
                        }
                    });

                    // console.log(nowDocId); // Î¨∏ÏÑú id

                    onSnapshot(doc(db, "description", nowDocId), (doc) => {
                        let row = doc.data();
                        let comments = row["commend"];
                        document.querySelector(".comments-list").innerHTML = "";
                        comments.forEach((c) => {
                            addItem(c);
                            input.value = "";
                        });
                    });
                    // Ï§ÄÌò∏ ÏàòÏ†ï ÎÅù

                    form.addEventListener("submit", handler);

                    // comment end -----------------------------------------
                };

                // Ï¢ãÏïÑÏöî Ï¶ùÍ∞Ä
                async function incrementLike(docId) {
                    let likesRef = doc(db, "description", docId);
                    await updateDoc(likesRef, {
                        likes: increment(1),
                    });
                }

                // ÎÇ†Ïî® API
                const getWeather = (city) => {
                    const API_KEY = "14488ab08a4c1877a39b16a8f809ecc8";
                    const cityName = city;
                    const weatherCardCityName = document.querySelector(".weather-card-city-name");
                    const weatherCardText = document.querySelector(".weather-card-text");
                    const weatherCardIcon = document.querySelector(".weather-card-icon");

                    fetch(`https://api.openweathermap.org/data/2.5/weather?q=${cityName}&appid=${API_KEY}&units=metric&lang=kr`)
                        // jsonÏúºÎ°ú Î≥ÄÌôò
                        .then((response) => {
                            return response.json();
                        })
                        // json Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞
                        .then((json) => {
                            const name = json.name;
                            const description = json.weather[0].description;
                            const icon = json.weather[0].icon;
                            const iconURL = `http://openweathermap.org/img/wn/${icon}@2x.png`;

                            weatherCardCityName.innerText = name;
                            weatherCardText.innerText = description;
                            weatherCardIcon.setAttribute("src", iconURL);
                        });
                };

                let herfName = unescape(location.href);
                var parameters = herfName.slice(herfName.indexOf("?") + 1, herfName.length);
                var valName = parameters.split("=")[1]; // indexÏùò Í∞í

                if (valName == undefined) valName = 0;
                let docs = await getDocs(collection(db, "description")); // firebaseÏóêÏÑú description Í∞í Í∞ÄÏ†∏Ïò§Í∏∞

                const temp = document.querySelector(".temp");
                temp.remove();

                docs.forEach((doc) => {
                    let row = doc.data();
                    let docId = doc.id;

                    if (row["index"] == valName) {
                        let index,
                            likes,
                            city = createDescrption(row);
                        createComment(valName);
                        createLikeBtn(index, likes, docId);
                        getWeather(city);
                    }
                });
                isSlide = true;
                if (isSlide) handleSlideStart();

                const tabs = document.querySelectorAll(".tab-column");
                tabs[valName].classList.add("tab-active");
                tabs.forEach((target) => {
                    target.addEventListener("click", async function (image) {
                        slideReset();

                        const temp = document.querySelector(".temp");
                        temp.remove();

                        docs.forEach((doc) => {
                            let row = doc.data();
                            let docId = doc.id;

                            if (row["index"] == image.target.id) {
                                let index,
                                    likes,
                                    city = createDescrption(row);
                                createComment(image.target.id);
                                createLikeBtn(index, likes, docId);
                                getWeather(city);
                            }
                        });
                        isSlide = true;
                        if (isSlide) handleSlideStart();

                        document.querySelectorAll(".tab-column").forEach((targets) => {
                            targets.classList.remove("tab-active");
                        });
                        target.classList.add("tab-active");
                    });
                });
            };
        </script>
    </body>
</html>
