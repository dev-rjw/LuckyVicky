<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="content-language" content="ko" />
        <meta name="viewport" content="initial-scale=1.0,user-scalable=yes,maximum-scale=3,width=device-width" />

        <title>Îü≠7„Ö£ÎπÑ7„Ö£</title>
        <meta name="title" content="Îü≠7„Ö£ÎπÑ7„Ö£" />
        <meta name="subject" content="Îü≠7„Ö£ÎπÑ7„Ö£" />
        <meta name="author" content="Îü≠7„Ö£ÎπÑ7„Ö£" />
        <meta name="copyright" content="Îü≠7„Ö£ÎπÑ7„Ö£" />
        <meta name="description" content="Îü≠7„Ö£ÎπÑ7„Ö£" />
        <meta name="keywords" content="Îü≠7„Ö£ÎπÑ7„Ö£" />
        <meta property="og:type" content="website" />
        <meta property="og:title" content="Îü≠7„Ö£ÎπÑ7„Ö£" />
        <meta property="og:description" content="Îü≠7„Ö£ÎπÑ7„Ö£" />
        <meta property="og:image" content="./resources/images/og.jpg" />

        <!-- favicon -->
        <link rel="shortcut icon" href="./resources/images/favicon/favicon.ico" />
        <link rel="apple-touch-icon" sizes="180x180" href="./resources/images/favicon/apple-icon-180x180.png" />
        <link rel="icon" type="image/png" sizes="192x192" href="./resources/images/favicon/android-icon-192x192.png" />
        <link rel="icon" type="image/png" sizes="32x32" href="./resources/images/favicon/favicon-32x32.png" />
        <link rel="icon" type="image/png" sizes="96x96" href="./resources/images/favicon/favicon-96x96.png" />
        <link rel="icon" type="image/png" sizes="16x16" href="./resources/images/favicon/favicon-16x16.png" />
        <link rel="manifest" href="./resources/images/favicon/manifest.json" />
        <meta name="msapplication-TileImage" content="./resources/images/favicon/ms-icon-144x144.png" />
        <meta name="msapplication-TileColor" content="#59C095" />
        <meta name="theme-color" content="#59C095" />

        <!-- Ïä§ÌÉÄÏùº -->
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700;900&display=swap" />
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
        <link href="./resources/css/reset-fonts.css" rel="stylesheet" />
        <link href="./resources/css/style.css" rel="stylesheet" />
        <link href="./resources/css/carousel.css" rel="stylesheet" />
        <link rel="stylesheet" href="./comment-box.css" />
    </head>
    <body>
        <script src="./resources/js/script.js"></script>
        <!-- ÎßàÏö∞Ïä§ Ìè¨Ïù∏ÌÑ∞ -->
        <div class="mouse-cursor"><img src="./resources/images/clover.png" alt="ÎßàÏö∞Ïä§Ïª§ÏÑú" /></div>

        <div id="wrap">
            <!-- Î∞∞Í≤Ω -->
            <div id="clover"></div>

            <div class="container" style="position: relative; z-index: 1" ;>
                <div class="contents">
                    <div class="header">
                        <h1 class="logo"><a href="/index.html" title="ÌôàÏúºÎ°ú Ïù¥Îèô"></a></h1>
                    </div>
                    <!-- ub-section -->
                    <section id="sub-section">
                        <!-- tabRow -->
                        <div class="tab-row">
                            <div class="tab-column">
                                <img src="./resources/images/jh/0.jpg" alt="Î∞ïÏ§ÄÌò∏" id="0" />
                                <span class="tab-hover-txt" id="0">Î∞ïÏ§ÄÌò∏üçÄ</span>
                            </div>
                            <div class="tab-column">
                                <img src="./resources/images/joayoung/joayoung-img.jpg" alt="Ï°∞ÏïÑÏòÅ" id="1" />
                                <span class="tab-hover-txt" id="1">Ï°∞ÏïÑÏòÅüçÄ</span>
                            </div>
                            <div class="tab-column">
                                <img src="./resources/images/kimminkyu/kimminkyu-img01.jpeg" alt="ÍπÄÎØºÍ∑ú" id="2" />
                                <span class="tab-hover-txt" id="2">ÍπÄÎØºÍ∑úüçÄ</span>
                            </div>
                            <div class="tab-column">
                                <img src="./resources/images/jiwon/1.png" alt="Î•òÏßÄÏõê" id="3" />
                                <span class="tab-hover-txt" id="3">Î•òÏßÄÏõêüçÄ</span>
                            </div>
                            <div class="tab-column">
                                <img src="./resources/images/hyun/profile1.jpg" alt="Ïù¥Ï∞ΩÌòÑ" id="4" />
                                <span class="tab-hover-txt" id="4">Ïù¥Ï∞ΩÌòÑüçÄ</span>
                            </div>
                        </div>
                        <!--// tabRow -->
                        <div class="view">
                            <div class="left-area">
                                <!-- carousel-wrap -->
                                <div id="carousel-wrap">
                                    <div class="inner">
                                        <!-- carousel-slide -->
                                        <div id="carousel-slide"></div>
                                        <!--// carousel-slide -->

                                        <!-- carousel-thumb -->
                                        <div id="carousel-thumb"></div>
                                        <!-- carousel-thumb -->

                                        <!-- btn-area -->
                                        <div id="carousel-btn-area">
                                            <button type="button" id="btn-prev"><span class="material-symbols-rounded"> chevron_left </span></button>
                                            <button type="button" id="btn-next"><span class="material-symbols-rounded"> chevron_right </span></button>
                                        </div>
                                        <!--// btn-area -->
                                    </div>
                                </div>
                                <!--// carousel-wrap -->
                            </div>
                            <div class="right-area">
                                <div class="weather-card-wrap">
                                    <div class="weather-card">
                                        <div class="weather-card-tit"><span class="weather-card-city-name">Ïò§Îäò</span>Ïùò ÎÇ†Ïî®</div>
                                        <div class="weather-card-text">‚òÄÔ∏è‚òÅÔ∏è‚ùÑÔ∏è‚òî</div>
                                        <img class="weather-card-icon" />
                                    </div>
                                </div>

                                <div class="list">
                                    <div class="temp" style="display: none"></div>
                                </div>
                            </div>
                        </div>
                    </section>
                    <!--// ub-section -->

                    <!-- <img id="expandedImg" style="z-index: -9999; width: 0; height: 0; opacity: 0" width="100%" /> -->
                    <div class="footer">
                        <div class="copyright">‚ìí LuckyVicky</div>
                    </div>
                </div>
            </div>
        </div>

        <script type="module">
            // Import the functions you need from the SDKs you need
            import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
            import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
            import { collection, addDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
            import { getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
            import { doc, updateDoc, increment, onSnapshot } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

            const firebaseConfig = {
                apiKey: "AIzaSyCmKJSlgO0ueisoj66FA_rOUTzNv8YzJ3o",
                authDomain: "luckyvicky-a9ab7.firebaseapp.com",
                projectId: "luckyvicky-a9ab7",
                storageBucket: "luckyvicky-a9ab7.appspot.com",
                messagingSenderId: "383119247900",
                appId: "1:383119247900:web:27203ea025a377e295edd9",
                measurementId: "G-CCN3JQ0KH2",
            };

            // Initialize Firebase
            const app = initializeApp(firebaseConfig);
            const db = getFirestore(app);

            window.onload = async function () {
                const carouselWrap = document.getElementById("carousel-wrap"); // Ï†ÑÏ≤¥ Í∞êÏã∏Í≥†ÏûàÎäî Ïä¨ÎùºÏù¥Îìú ÏòÅÏó≠
                const carouselSlide = document.getElementById("carousel-slide"); // ÌÅ∞ Ïù¥ÎØ∏ÏßÄ Ïä¨ÎùºÏù¥Îìú (ÏûêÎèô)
                const carouselSlideItems = document.querySelectorAll(".carousel-slide-item"); // ÌÅ∞ Ïù¥ÎØ∏ÏßÄ Ïä¨ÎùºÏù¥Îìú ÏïÑÏù¥ÌÖú
                const carouselThumb = document.getElementById("carousel-thumb");
                const carouselBtnArea = document.getElementById("carousel-btn-area");
                const carouselBtnPrev = document.getElementById("btn-prev");
                const carouselBtnNext = document.getElementById("btn-next");

                let slideWid; // Ïä¨ÎùºÏù¥Îìú ÎÑìÏù¥ Í∞í
                let slideCurrentIdx = 0; // Ïä¨ÎùºÏù¥Îìú ÌòÑÏû¨ Ïù∏Îç±Ïä§ Í∞í
                let slideMoveDelay = 3000; // Ïä¨ÎùºÏù¥Îìú ÎèåÏïÑÍ∞ÄÎäî ÏÜçÎèÑ
                let slideMoveTimer; // interval Ï¥àÍ∏∞Ìôî
                let isSlide = false;

                // Ïä¨ÎùºÏù¥Îìú ÏûêÎèô Î°§ÎßÅ
                const carouselSlideMove = () => {
                    slideMoveTimer = setInterval(() => {
                        const carouselSlideLength = document.querySelectorAll(".carousel-slide-item").length;
                        slideCurrentIdx = (slideCurrentIdx + 1) % carouselSlideLength; // ÌòÑÏû¨ Ïù∏Îç±Ïä§Í∞í Íµ¨ÌïòÍ∏∞

                        carouselSlide.style.transform = `translate3d(-${slideCurrentIdx * slideWid}px, 0px, 0px)`;

                        carouselThumbSet();

                        // document.querySelectorAll(".carousel-thumb-item").forEach((thumb, idx) => {
                        //     thumb.classList.toggle("curr", idx === slideCurrentIdx);
                        // });
                    }, slideMoveDelay);
                };

                // ÌòÑÏû¨ Ïù∏Îç±Ïä§ Í∞íÏóê ÎßûÏ∂∞ Ïç∏ÎÑ§Ïùº ÏóëÌã∞Î∏å
                const carouselThumbSet = () => {
                    const carouselThumbItems = document.querySelectorAll(".carousel-thumb-item");
                    carouselThumbItems.forEach((thumb) => thumb.classList.remove("curr"));
                    carouselThumbItems[slideCurrentIdx].classList.add("curr");
                };

                // Ïä¨ÎùºÏù¥Îìú Îí§Î°úÍ∞ÄÍ∏∞
                const carouselPrevMove = () => {
                    clearInterval(slideMoveTimer); // Î°§ÎßÅ Ï¥àÍ∏∞Ìôî
                    slideCurrentIdx == 0 ? (slideCurrentIdx = 4) : slideCurrentIdx--; // Ïä¨ÎùºÏù¥Îìú Îß® ÏïûÏù¥Î©¥ ÎßàÏßÄÎßâÏúºÎ°ú Ïù¥Îèô
                    carouselSlide.style.transform = `translate3d(-${slideCurrentIdx * slideWid}px, 0px, 0px)`;

                    carouselThumbSet(); // ÌòÑÏû¨ Ïù∏Îç±Ïä§ Í∞íÏóê ÎßûÏ∂∞ Ïç∏ÎÑ§Ïùº ÏóëÌã∞Î∏å
                    carouselSlideMove(); // Îã§Ïãú Î°§ÎßÅ ÏãúÏûë
                };

                // Ïä¨ÎùºÏù¥Îìú ÏïûÏúºÎ°úÍ∞ÄÍ∏∞
                const carouselNextMove = () => {
                    clearInterval(slideMoveTimer); // Î°§ÎßÅ Ï¥àÍ∏∞Ìôî
                    slideCurrentIdx == 4 ? (slideCurrentIdx = 0) : slideCurrentIdx++; // Ïä¨ÎùºÏù¥Îìú ÎßàÏßÄÎßâÏù¥Î©¥ Îß® ÏïûÏúºÎ°ú Ïù¥Îèô
                    carouselSlide.style.transform = `translate3d(-${slideCurrentIdx * slideWid}px, 0px, 0px)`;

                    carouselThumbSet(); // ÌòÑÏû¨ Ïù∏Îç±Ïä§ Í∞íÏóê ÎßûÏ∂∞ Ïç∏ÎÑ§Ïùº ÏóëÌã∞Î∏å
                    carouselSlideMove(); // Îã§Ïãú Î°§ÎßÅ ÏãúÏûë
                };

                // Ïä¨ÎùºÏù¥Îìú ÏãúÏûë
                const handleSlideStart = () => {
                    // Ïä¨ÎùºÏù¥Îìú Î¶¨Ïä§Ìä∏ Ï¥àÍ∏∞ ÎÑìÏù¥ ÏÑ∏ÌåÖ
                    slideWid = carouselSlide.offsetWidth;
                    carouselSlideItems.forEach((item, idx) => (item.style.width = slideWid + "px"));

                    carouselSlideMove();

                    // Ïä¨ÎùºÏù¥Îìú Ïç∏ÎÑ§Ïùº ÌÅ¥Î¶≠ Í∏∞Îä•
                    document.querySelectorAll(".carousel-thumb-item").forEach((item, idx) => {
                        // Ïç∏ÎÑ§Ïùº ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏
                        item.addEventListener("click", () => {
                            clearInterval(slideMoveTimer); // Î°§ÎßÅ Ï¥àÍ∏∞Ìôî
                            slideCurrentIdx = idx; // Ïù∏Îç±Ïä§Í∞íÏùÑ ÌÅ¥Î¶≠Ìïú Ïù∏Îç±Ïä§ Í∞íÍ≥º ÎèôÏùºÌïòÍ≤å Î≥ÄÍ≤ΩÌï¥Ï§å

                            //ÌÅ¥Î¶≠Ìïú ÏöîÏÜåÏóê ÎßûÏ∂∞ Ïä¨ÎùºÏù¥Îìú Ïù¥Îèô : carouselSlideÏùò transform3dÏùò Í∞íÏùÑ ÌÅ¥Î¶≠Ìïú ÏöîÏÜåÏùò -(Ïù∏Îç±Ïä§*Ïä¨ÎùºÏù¥Îìú) ÎÑìÏù¥Î°ú Ï†ÅÏö©
                            carouselSlide.style.transform = `translate3d(-${slideCurrentIdx * slideWid}px, 0px, 0px)`;

                            carouselThumbSet(); // ÌòÑÏû¨ Ïù∏Îç±Ïä§ Í∞íÏóê ÎßûÏ∂∞ Ïç∏ÎÑ§Ïùº ÏóëÌã∞Î∏å
                            carouselSlideMove(); // Îã§Ïãú Î°§ÎßÅ ÏãúÏûë
                        });
                    });

                    carouselBtnPrev.addEventListener("click", carouselPrevMove); // Ïù¥Ï†Ñ Î≤ÑÌäº ÌÅ¥Î¶≠
                    carouselBtnNext.addEventListener("click", carouselNextMove); // Îã§Ïùå Î≤ÑÌäº ÌÅ¥Î¶≠
                };

                let isDragChk = false; // [drag] Ï¥àÍ∏∞Ìôî
                let downClientX; // [drag] ÎßàÏö∞Ïä§ ÌÅ¥Î¶≠ÌñàÏùÑ Îïå Ìè¨Ïù∏ÌÑ∞ ÏúÑÏπò
                let upClientX; // [drag] ÎßàÏö∞Ïä§ ÎïüÏùÑ Îïå Ìè¨Ïù∏ÌÑ∞ ÏúÑÏπò

                // ÎßàÏö∞Ïä§ ÌÅ¥Î¶≠ÌñàÏùÑ Îïå Ïù¥Î≤§Ìä∏
                carouselSlide.addEventListener("mousedown", (e) => {
                    isDragChk = true;
                    downClientX = e.clientX; // Ï≤òÏùå ÌÅ¥Î¶≠Ìï† Îïå ÌÅ¥Î¶≠ ÏßÄÏ†ê Ï≤¥ÌÅ¨
                });

                // ÎßàÏö∞Ïä§ ÌÅ¥Î¶≠ÏóêÏÑú ÎïüÏùÑ Îïå Ïù¥Î≤§Ìä∏
                carouselSlide.addEventListener("mouseup", (e) => {
                    // Ïù¥ÎØ∏ÏßÄ Îì§Ïñ¥Í∞ÄÎ©¥ Ïã§ÌñâÏù¥ ÏïàÎêòÍ∞ÄÏßÄÍ≥† css ÏóêÏÑú imgÏóê user-drag: none; ÎÑ£Ïñ¥Ï§òÏïºÌï®
                    isDragChk = false;
                    upClientX = e.clientX; // ÌÅ¥Î¶≠ÌõÑ ÎïüÏùÑ Îïå ÌÅ¥Î¶≠ ÏßÄÏ†ê Ï≤¥ÌÅ¨

                    // Ï≤´ÌÅ¥Î¶≠ > ÌÅ¥Î¶≠ÎïüÏùÑÎïå ? Ïò§Î•∏Ï™Ω Ïù¥Îèô : ÏôºÏ™Ω Ïù¥Îèô;
                    downClientX > upClientX ? carouselNextMove() : carouselPrevMove();
                    carouselThumbSet(); // ÌòÑÏû¨ Ïù∏Îç±Ïä§ Í∞íÏóê ÎßûÏ∂∞ Ïç∏ÎÑ§Ïùº ÏóëÌã∞Î∏å
                });

                // Ïä¨ÎùºÏù¥Îìú Ï¥àÍ∏∞Ìôî
                const slideReset = () => {
                    slideCurrentIdx = 0;
                    clearInterval(slideMoveTimer);
                    carouselSlide.innerHTML = "";
                    carouselThumb.innerHTML = "";
                    carouselSlide.style.transform = `translate3d(0px, 0px, 0px)`;
                    isSlide = false;
                };

                // Ïä¨ÎùºÏù¥Îìú ÏÉùÏÑ±
                const createSlides = (imgs) => {
                    let slideBigItems = "";
                    let slideThumbItems = "";

                    for (let i = 0; i < imgs.length; i++) {
                        slideBigItems += `
                                <div class="carousel-slide-item">
                                    <img src="${imgs[i]}" />
                                </div>
                            `;
                        slideThumbItems += `
                                <div class="carousel-thumb-item ${i === 0 ? "curr" : ""}">
                                    <img src="${imgs[i]}" />
                                </div>
                            `;
                    }
                    carouselSlide.innerHTML = slideBigItems;
                    carouselThumb.innerHTML = slideThumbItems;
                };

                // ÏÇ¨ÏßÑ Î∞è ÏÑ§Î™Ö ÏÉùÏÑ±
                const createDescrption = (row) => {
                    let name = row["name"];
                    let description = row["description"];
                    let mbti = row["mbti"];
                    let advantages = row["advantages"];
                    let style = row["style"];
                    let tmi = row["tmi"];
                    let blog = row["blog"];
                    let github = row["github"];
                    let imgs = row["image"];
                    let index = row["index"];
                    let likes = row["likes"];
                    let city = row["city"];

                    const temp = document.createElement("div");
                    temp.className = "temp";
                    temp.innerHTML = `
                        <div class="name-description-wrap">
                            <h1 id="name">${name}<p id="mbti">${mbti}</p></h1>
                            <h3 id="description">${description}</h3>
                        </div>
                        <div class="info-list-wrap">
                            <ul class="info-list">
                                <li>
                                    <span class="info-list-tit">Ïû•Ï†ê</span>
                                    <span id="advantages" class="info-list-txt">${advantages}</span>
                                </li>
                                <li>
                                    <span class="info-list-tit">ÌòëÏóÖÏä§ÌÉÄÏùº</span>
                                    <span id="advantages" class="info-list-txt">${style}</span>
                                </li>
                                <li>
                                    <span class="info-list-tit">TMI</span>
                                    <span id="advantages" class="info-list-txt">${tmi}</span>
                                </li>
                            </ul>
                        </div>

                        <div class="info-btn-wrap">
                            <div class="info-btn-left">
                                 <a href="${blog}" target="_blank">
                                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSCFUFKtdX8pENrrPyxgYnXmc_G3vjgnfI8gtu6SmWuaX34iEtBlHlL4qbZdQ&s" width="30px" /> </a
                            >
                                <a href="${github}" target="_blank">
                                    <img src="data:image/png;base64,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" width="25px" /> </a
                            >
                            </div>

                            <div class="info-btn-right">
                                <div id="like-btn-area"></div>
                            </div>
                        </div>

                        <aside class="comments-aside">
                            <div class="comments-group">
                                <div class="comments-title">
                                    <h1>Comment Box</h1>
                                </div>
                                <div class="comments-contents">
                                    <ul class="comments-list"></ul>
                                </div>
                            </div>
                            <div class="form-group">
                                <form class="comments-form">
                                    <input id="comment-input" type="text" placeholder="Comment..." />
                                    <button id="send-btn">Send</button>
                                </form>
                            </div>
                        </aside>
                    `;
                    document.querySelector(".list").append(temp);
                    createSlides(imgs);

                    return index, likes, city;
                };

                const createComment = () => {
                    // comment start -----------------------------------------
                    const form = document.querySelector("form");
                    const input = document.querySelector("input");
                    const ul = document.querySelector("ul");

                    // ÎåìÍ∏Ä ÏÇ≠Ï†ú
                    const delItem = (event) => {
                        const target = event.target.parentElement;
                        target.remove();
                    };

                    // ÎåìÍ∏Ä ÏàòÏ†ï
                    const modifyItem = (event) => {
                        console.log(event.target.parentElement);
                        const message = this.prompt("ÏàòÏ†ïÌï† Î©îÏÑ∏ÏßÄÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî.", event.target.parentElement.firstElementChild.innerText);
                        event.target.parentElement.firstElementChild.innerText = message;
                    };

                    // ÎåìÍ∏Ä Ï∂îÍ∞Ä
                    const addItem = (text) => {
                        if (text !== "") {
                            const li = document.createElement("li");
                            const removeBtn = document.createElement("button");
                            const modifyBtn = document.createElement("button");
                            const span = document.createElement("span");
                            span.innerText = text;
                            modifyBtn.innerText = "Edit";
                            removeBtn.innerText = "Del";
                            modifyBtn.addEventListener("click", modifyItem);
                            removeBtn.addEventListener("click", delItem);
                            li.appendChild(span);
                            li.appendChild(modifyBtn);
                            li.appendChild(removeBtn);
                            ul.appendChild(li);
                        }
                    };

                    const handler = (event) => {
                        event.preventDefault();
                        addItem(input.value);
                        input.value = "";
                    };

                    form.addEventListener("submit", handler);

                    // comment end -----------------------------------------
                };

                // Ï¢ãÏïÑÏöî Î≤ÑÌäº ÏÉùÏÑ±
                function createLikeBtn(index, likes, docId) {
                    const likeBtnArea = document.getElementById("like-btn-area");
                    likeBtnArea.innerHTML = `
                        <button class="like-btn like-btn-${index}">
                            <div class="like-icon">
                                <span class="material-symbols-rounded"> thumb_up </span>
                            </div>
                            <span class="like-text">${likes}</span>
                        </button>
                    `;
                    const likeBtnIndex = document.querySelector(`.like-btn-${index}`);
                    likeBtnIndex.addEventListener("click", function () {
                        incrementLike(docId);
                    });

                    // Ïã§ÏãúÍ∞Ñ ÏóÖÎç∞Ïù¥Ìä∏ Î¶¨Ïä§ÎÑà ÏÑ§Ï†ï
                    let likesRef = doc(db, "description", docId);
                    onSnapshot(likesRef, (doc) => {
                        let updatedLikes = doc.data().likes;
                        let likeText = document.querySelector(`.like-btn-${index} .like-text`);
                        likeText.innerText = updatedLikes;
                    });
                }

                // Ï¢ãÏïÑÏöî Ï¶ùÍ∞Ä
                async function incrementLike(docId) {
                    let likesRef = doc(db, "description", docId);
                    await updateDoc(likesRef, {
                        likes: increment(1),
                    });
                }

                // ÎÇ†Ïî® API
                const getWeather = (city) => {
                    const API_KEY = "14488ab08a4c1877a39b16a8f809ecc8";
                    const cityName = city;
                    const weatherCardCityName = document.querySelector(".weather-card-city-name");
                    const weatherCardText = document.querySelector(".weather-card-text");
                    const weatherCardIcon = document.querySelector(".weather-card-icon");

                    fetch(`https://api.openweathermap.org/data/2.5/weather?q=${cityName}&appid=${API_KEY}&units=metric&lang=kr`)
                        // jsonÏúºÎ°ú Î≥ÄÌôò
                        .then((response) => {
                            return response.json();
                        })
                        // json Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞
                        .then((json) => {
                            const name = json.name;
                            const description = json.weather[0].description;
                            const icon = json.weather[0].icon;
                            const iconURL = `http://openweathermap.org/img/wn/${icon}@2x.png`;

                            weatherCardCityName.innerText = name;
                            weatherCardText.innerText = description;
                            weatherCardIcon.setAttribute("src", iconURL);
                        });
                };

                let herfName = unescape(location.href);
                var parameters = herfName.slice(herfName.indexOf("?") + 1, herfName.length);
                var valName = parameters.split("=")[1]; // indexÏùò Í∞í

                if (valName == undefined) valName = 0;
                let docs = await getDocs(collection(db, "description")); // firebaseÏóêÏÑú description Í∞í Í∞ÄÏ†∏Ïò§Í∏∞

                const temp = document.querySelector(".temp");
                temp.remove();

                docs.forEach((doc) => {
                    let row = doc.data();
                    let docId = doc.id;

                    if (row["index"] == valName) {
                        let index,
                            likes,
                            city = createDescrption(row);
                        createComment();
                        createLikeBtn(index, likes, docId);
                        getWeather(city);
                    }
                });
                isSlide = true;
                if (isSlide) handleSlideStart();

                const tabs = document.querySelectorAll(".tab-column");
                tabs[valName].classList.add("tab-active");
                tabs.forEach((target) => {
                    target.addEventListener("click", async function (image) {
                        slideReset();

                        const temp = document.querySelector(".temp");
                        temp.remove();

                        docs.forEach((doc) => {
                            let row = doc.data();
                            let docId = doc.id;

                            if (row["index"] == image.target.id) {
                                let index,
                                    likes,
                                    city = createDescrption(row);
                                createComment();
                                createLikeBtn(index, likes, docId);
                                getWeather(city);
                            }
                        });
                        isSlide = true;
                        if (isSlide) handleSlideStart();

                        document.querySelectorAll(".tab-column").forEach((targets) => {
                            targets.classList.remove("tab-active");
                        });
                        target.classList.add("tab-active");
                    });
                });
            };
        </script>
        <!-- <script src="./resources/js/carousel.js"></script> -->
    </body>
</html>
